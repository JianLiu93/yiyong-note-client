webpackJsonp([6],{rZ4B:function(e,s){},xJsL:function(e,s,t){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i=t("Dd8w"),r=t.n(i),o=t("NYxO"),n={name:"Login",data:function(){return{login:{username:"",password:"",notice:"请输入用户名和密码",isError:!1},register:{username:"",password:"",notice:"账号密码请牢记",isError:!1}}},computed:r()({},Object(o.e)({isShowLogin:function(e){return e.user.isShowLogin}}),Object(o.c)(["username","slug","check_log"])),methods:r()({},Object(o.d)(["setNewList"]),Object(o.b)({loginUser:"login",registerUser:"register",logout:"logout"}),{chooseRegister:function(){this.$store.commit("setLoginShow",!1)},chooseLogin:function(){this.$store.commit("setLoginShow",!0)},onRegister:function(){var e=this,s=this.validUsername(this.register.username),t=this.validPassword(this.register.password);return s.isValid.test(this.register.username)?t.isValid.test(this.register.password)?void this.registerUser({username:this.register.username,password:this.register.password}).then(function(s){e.register.isError=!1,e.register.notice="",e.setNewList(),e.$router.replace({path:"/refresh"}),console.log(s)}).catch(function(s){e.register.isError=!0,e.register.notice=s.msg}):(this.register.isError=!0,void(this.register.notice=t.notice)):(this.register.isError=!0,void(this.register.notice=s.notice))},onLogin:function(){var e=this,s=this.validUsername(this.login.username),t=this.validPassword(this.login.password);return s.isValid.test(this.login.username)?t.isValid.test(this.login.password)?void this.loginUser({username:this.login.username,password:this.login.password}).then(function(s){e.login.isError=!1,e.login.notice="",e.setNewList(),e.$router.replace({path:"/refresh"}),console.log(s)}).catch(function(s){e.login.isError=!0,e.login.notice=s.msg}):(this.login.isError=!0,void(this.login.notice=t.notice)):(this.login.isError=!0,void(this.login.notice=s.notice))},validUsername:function(e){return{isValid:/^[a-zA-Z_0-9\u4e00-\u9fa5\uf900-\ufa2d]{3,15}$/,notice:"用户名必须3-15个字符，可以是英文数字下划线中文"}},validPassword:function(e){return{isValid:/^[a-zA-Z_0-9\u4e00-\u9fa5\uf900-\ufa2d]{6,15}$/,notice:"密码必须6-15个字符，可以是英文数字下划线中文"}},onLogout:function(){this.logout({path:"/login"})}})},a={render:function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{attrs:{id:"login"}},[t("div",{staticClass:"mask"},[t("div",{staticClass:"wrapper"},[t("div",{staticClass:"container"},[t("div",{staticClass:"main"}),e._v(" "),t("div",{staticClass:"form"},[t("div",{directives:[{name:"show",rawName:"v-show",value:!e.check_log,expression:"!check_log"}],staticClass:"no-login"},[t("h3",{on:{click:e.chooseLogin}},[e._v("登录")]),e._v(" "),t("transition",{attrs:{name:"slide"}},[t("div",{staticClass:"login",class:{show:e.isShowLogin}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.login.username,expression:"login.username"}],attrs:{type:"text",placeholder:"请输入用户名"},domProps:{value:e.login.username},on:{input:function(s){s.target.composing||e.$set(e.login,"username",s.target.value)}}}),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.login.password,expression:"login.password"}],attrs:{type:"text",placeholder:"请输入密码"},domProps:{value:e.login.password},on:{keyup:function(s){return!s.type.indexOf("key")&&e._k(s.keyCode,"enter",13,s.key,"Enter")?null:e.onLogin.apply(null,arguments)},input:function(s){s.target.composing||e.$set(e.login,"password",s.target.value)}}}),e._v(" "),t("p",{class:{error:e.login.isError}},[e._v(e._s(e.login.notice))]),e._v(" "),t("div",{staticClass:"button",on:{click:e.onLogin}},[e._v("登录")])])]),e._v(" "),t("h3",{on:{click:e.chooseRegister}},[e._v("创建账户")]),e._v(" "),t("transition",{attrs:{name:"slide"}},[t("div",{staticClass:"register",class:{show:!e.isShowLogin}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.register.username,expression:"register.username"}],attrs:{type:"text",placeholder:"请输入用户名"},domProps:{value:e.register.username},on:{input:function(s){s.target.composing||e.$set(e.register,"username",s.target.value)}}}),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.register.password,expression:"register.password"}],attrs:{type:"text",placeholder:"请输入密码"},domProps:{value:e.register.password},on:{keyup:function(s){return!s.type.indexOf("key")&&e._k(s.keyCode,"enter",13,s.key,"Enter")?null:e.onRegister.apply(null,arguments)},input:function(s){s.target.composing||e.$set(e.register,"password",s.target.value)}}}),e._v(" "),t("p",{class:{error:e.register.isError}},[e._v(e._s(e.register.notice))]),e._v(" "),t("div",{staticClass:"button",on:{click:e.onRegister}},[e._v("创建账号")])])]),e._v(" "),t("div",{staticClass:"return"},[t("div",{staticClass:"return-button",on:{click:function(s){return e.$router.replace({path:"/"})}}},[e._v("返回主页")])])],1),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.check_log,expression:"check_log"}],staticClass:"user"},[t("div",{staticClass:"user-avatar"},[t("span",{staticClass:"avatar",attrs:{title:e.username}},[e._v(e._s(e.slug))]),e._v(" "),t("div",{staticClass:"name"},[e._v(e._s(e.username))])]),e._v(" "),t("div",{staticClass:"return"},[t("div",{staticClass:"return-button",on:{click:e.onLogout}},[e._v("重新登录")]),e._v(" "),t("div",{staticClass:"return-button",on:{click:function(s){return e.$router.replace({path:"/"})}}},[e._v("返回主页")])])])])])])])])},staticRenderFns:[]};var l=t("VU/8")(n,a,!1,function(e){t("rZ4B")},"data-v-5231d53c",null);s.default=l.exports}});
//# sourceMappingURL=6.e5be795d4cd06276d779.js.map